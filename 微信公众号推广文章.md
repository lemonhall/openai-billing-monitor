# 🚀 开源新作：OpenAI API成本控制神器，让你的AI开发不再烧钱！

最近ChatGPT、Claude、Qwen等大模型API越来越火，但有没有发现一个问题——**API费用太难控制了**！

一不小心就被扣了几十刀，甚至上百刀。特别是在开发调试阶段，反复调用API，成本蹭蹭往上涨... 😭

作为一名深受其害的开发者，我决定开源一个解决方案：**OpenAI Billing Monitor**！

## 🎯 这个库能帮你解决什么问题？

### 💰 成本失控
- ✅ **实时监控**：每次API调用的成本一目了然
- ✅ **智能预警**：接近预算时自动提醒
- ✅ **硬性限制**：超出预算自动阻止请求
- ✅ **详细统计**：日/月使用报告，成本分析

### 🔧 集成复杂
- ✅ **零侵入**：只需要一行装饰器，现有代码无需修改
- ✅ **多种方式**：装饰器、包装器、手动监控任你选择
- ✅ **即插即用**：5分钟集成完成

### 📊 数据不透明
- ✅ **可视化界面**：漂亮的GUI界面，实时显示使用情况
- ✅ **进度条**：直观显示预算使用进度
- ✅ **历史记录**：详细的使用历史和趋势分析

## 🛠️ 使用有多简单？

### 方式1：装饰器模式（推荐）
```python
from openai_billing import monitor_openai_call
import openai

@monitor_openai_call(model_name="gpt-4")
def chat_with_ai(message):
    client = openai.OpenAI()
    return client.chat.completions.create(
        model="gpt-4",
        messages=[{"role": "user", "content": message}]
    )

# 正常调用，自动监控！
response = chat_with_ai("你好！")
```

### 方式2：包装器模式
```python
from openai_billing import OpenAIWrapper

# 直接替换OpenAI客户端
client = OpenAIWrapper(api_key="your-key")
response = client.chat.completions.create(
    model="gpt-4",
    messages=[{"role": "user", "content": "Hello!"}]
)

# 查看使用统计
print(client.get_usage_summary())
```

### 方式3：GUI可视化
```bash
# 启动图形界面
python -m openai_billing.gui.main
```

![GUI界面示例图]

## 🎨 界面长什么样？

想象一下：

📈 **主界面**
- 实时显示今日/本月成本
- 进度条显示预算使用情况
- 一键查看详细统计

⚙️ **配置界面**  
- 支持23+种主流AI模型
- 灵活设置日/月预算限制
- 可视化配置，告别命令行

📊 **统计界面**
- 详细的使用分析报告
- Token消耗趋势图
- 成本分布统计

## 🌟 支持哪些AI模型？

不只是OpenAI！我们内置了23+种主流模型的计费配置：

### 🤖 OpenAI家族
- GPT-4系列：gpt-4, gpt-4-turbo, gpt-4o, gpt-4o-mini
- GPT-3.5系列：gpt-3.5-turbo, gpt-3.5-turbo-16k

### 🇨🇳 国产AI
- **通义千问**：qwen-turbo, qwen-plus, qwen-max
- **月之暗面**：moonshot-v1-8k/32k/128k  
- **百川智能**：baichuan2-turbo
- **深度求索**：deepseek-chat, deepseek-coder

### 🌍 国际大厂
- **Anthropic**：claude-3-opus, claude-3-sonnet, claude-3-haiku
- **Google**：gemini-pro, gemini-pro-vision

## 💡 应用场景

### 🧪 开发调试
设置日预算$5，避免调试时烧钱
```python
# 设置每日$5限制
thresholds = ThresholdConfig(
    daily_cost_limit=5.0,
    warning_threshold=0.8  # 80%时警告
)
```

### 🏢 团队项目
为不同项目设置独立预算监控
```python
# 项目A：保守预算
project_a_monitor = BillingMonitor(config_dir="./project_a_config")

# 项目B：充足预算  
project_b_monitor = BillingMonitor(config_dir="./project_b_config")
```

### 📚 教学演示
学生练习时避免意外费用
```python
# 严格限制：每日$1
student_thresholds = ThresholdConfig(
    daily_cost_limit=1.0,
    daily_token_limit=10000
)
```

## 🚀 5分钟快速上手

### 1. 安装
```bash
pip install openai-billing-monitor
```

### 2. 基本使用
```python
from openai_billing import monitor_openai_call

@monitor_openai_call()  # 就这一行！
def your_openai_function():
    # 你的现有代码
    pass
```

### 3. 启动GUI
```bash
python -m openai_billing.gui.main
```

## ⚠️ 重要声明

**⚠️ 本库目前仍在开发中，请勿用于生产环境！**

- 🧪 当前版本：v0.1.0（开发版）
- 🔄 持续更新中，功能还在完善
- 💡 欢迎提Issue和建议
- 🤝 开源协作，共同完善

## 📦 获取方式

### GitHub开源地址
```
https://github.com/lemonhall/openai-billing-monitor
```

### 安装命令
```bash
pip install openai-billing-monitor
```

## 🤔 为什么开源这个项目？

作为AI开发者，我深知成本控制的痛点：

1. **开发调试时费用失控** - 一个bug可能花掉几十美元
2. **团队协作缺乏监管** - 不知道谁用了多少，钱花在哪里
3. **预算规划困难** - 无法预估项目的API成本
4. **缺乏可视化工具** - 只能等账单出来才知道用了多少

这个库就是为了解决这些实际问题，让AI开发更加可控、透明。

## 🔮 后续规划

虽然还在开发中，但我们有明确的路线图：

### 🎯 短期目标（Q1）
- ✅ 完善GUI界面
- ✅ 增加更多模型支持
- ✅ 优化性能和稳定性

### 🚀 中期目标（Q2）
- 📊 高级数据可视化（图表、趋势分析）
- 🔔 多种通知方式（邮件、钉钉、企微）
- 🗄️ 数据库存储支持

### 🌟 长期目标（下半年）
- 👥 多用户权限管理
- 🤖 智能成本优化建议
- 📈 成本预测和预算规划

## 💬 社区交流

想要了解更多或参与开发？

- 🐛 **提Bug**：GitHub Issues
- 💡 **功能建议**：GitHub Discussions  
- 📧 **邮件交流**：[你的邮箱]
- 💬 **微信群**：扫码加入AI开发者交流群

[二维码占位]

## 🎉 最后的话

AI时代，成本控制和技术实力同样重要。

希望这个小工具能帮到正在为API费用头疼的你！

如果觉得有用，请：
- ⭐ 给个Star支持一下
- 🔄 转发给需要的朋友
- 💬 留言分享你的使用心得

让我们一起让AI开发更简单、更可控！

---

**OpenAI Billing Monitor**  
*让每一分API费用都花得明明白白*

🔗 GitHub: https://github.com/lemonhall/openai-billing-monitor
📦 PyPI: pip install openai-billing-monitor

---

**⚠️ 再次提醒：本库仍在开发中，请谨慎用于生产环境！**
